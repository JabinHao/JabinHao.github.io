---
title: Chapter1 设计模式七大原则
excerpt: 设计模式目的、七大原则、核心思想
tags:
  - java
  - 设计模式
categories:
  - Java笔记
  - 设计模式
banner_img: /img/post/banner//horizon.png
index_img: /img/post/index/DesignPattern.png
category: Java笔记/Java设计模式
abbrlink: de421c7
date: 2021-03-02 16:52:59
updated: 2021-03-02 23:53:16
subtitle:
---
## 1.1 简介

### 1.1.1 设计模式目的

1. 为了让程序具有更好的：
    * 代码重用性
    * 可读性
    * 可扩展性
    * 高内聚、低耦合

### 1.1.2 设计模式七大原则

1. 单一职责原则
2. 接口隔离原则
3. 依赖倒转（倒置）原则
4. 里氏替换原则
5. 开闭原则
6. 迪米特法则
7. 合成复用原则


## 1.2 七大原则详解

### 1.2.1 单一职责原则

1. 什么是：即一个类应该只负责一项职责
2. 其它情况：  
   类中方法较少时，也可在同一个类中的方法级别上保持单一职责原则

3. 注意事项和细节
   * 降低类的复杂度，一个类只负责一项职责
   * 提高类的可读性、可维护性
   * 降低变更引起的风险


### 1.2.2 接口隔离原则（Interface Segregation Principle）

1. 简介  
   客户端不应该依赖它不需要的接口，即一个类对另一个类的依赖应该建立在最小接口上
2. 示例：
   * 接口有五个方法
   * 类A调用实现类B，用到了方法1、2、3
   * 类C调用实现类D，用到了方法1、4、5
   * 两个实现类据需要实现接口的5个方法，但各有两个方法是用不到的
3. 解决方案
   * 将接口拆为三个，接口1包含方法1，接口2中为方法2、3，接口3中为方法4、5
   * 实现类B只需实现接口1、2
   * 实现类D只需实现接口1、3

### 1.2.3 依赖倒转原则（Dependence Inversion Principle）

1. 简介  
   * 高层模块不应该依赖底层模块，二者都应该依赖其抽象
   * 抽象不应该依赖细节，细节应该依赖抽象
   * 依赖倒转的中心思想是面向接口编程
   * 依赖倒转原则是基于这样的设计理念:相对于细节的多变性，抽象的东西要稳定的多。以抽象为基础搭建的架构比以细节为基础的架构要稳定的多。在java中，抽象指的是接口或抽象类，细节就是具体的实现类
   * 使用接口或抽象类的目的是制定好规范，而不涉及任何具体的操作，把展现细节的任务交给他们的实现类去完成

2. -依赖传递的三种方式
   * 接口传递
   * 构造方法传递
   * setter 方法传递

3. 注意事项与原则
   * 低层模块尽量都要有抽象类或接口，或者两者都有，程序稳定性更好
   * 变量的声明类型尽量是抽象类或接口，这样我们的变量引用和实际对象间，就存在一个缓冲层，利于程序扩展和优化
   * 继承时遵循里氏替换原则

### 1.2.4 里氏替换原则

1. 简介
   * 如果对每个类型为T1的对象o1，都有类型为T2的对象02，使得以T1定义的所有程序P在所有的对象o1都代换成o2时，程序P的行为没有发生变化，那么类型T2是类型T1的子类型。换句话说，**所有引用基类的地方必须能透明地使用其子类的对象**
   *  在使用继承时，遵循里氏替换原则，在子类中尽量不要重写父类的方法
   *  里氏替换原则告诉我们，继承实际上让两个类耦合性增强了，在适当的情况下，可以通过聚合，组合，依赖来解决问题。

2. 案例：
   * 父类定义一个方法
   * 子类无意间重写该方法，导致原功能发生异常
3. 解决方案
   * 原来的父类和子类都继承一个更通俗的基类，从而去掉原有继承关系

### 1.2.5 开闭原则（Open Closed Principle）

1. 简介
   * 开闭原则是编程中最基础、最重要的设计原则
   * 个软件实体如类，模块和函数应该对扩展开放(对提供方)，对修改关闭(对使用方)。用抽象构建框架，用实现扩展细节。
   * 当软件需要变化时，尽量通过扩展软件实体的行为来实现变化，而不是通过修改已有的代码来实现变化。
   * 编程中遵循其它原则，以及使用设计模式的目的就是遵循开闭原则。

### 1.2.6 迪米特法则（Demeter Principle）

1. 简介
   * 一个对象应该对其他对象保持最少的了解
   * 类与类关系越密切，耦合度越大
   * 迪米特法则( Demeter Principle)又叫最少知道原则，即一个类对自己依赖的类知道的越少越好。也就是说，对于被依赖的类不管多么复杂，都尽量将逻辑封装在类的内部。对外除了提供的 public方法，不对外泄露任何信息
   * 迪米特法则还有个更简单的定义:只与直接的朋友通信
   * 直接的朋友:出现在成员变量，方法参数，方法返回值中的类称为直接的朋友，而出现在局部变量中的类不是直接的朋友。也就是说，陌生的类最好不要以局部变量的形式出现在类的内部。

2. 注意事项
   * 迪米特法则的核心是降低类之间的耦合
   * 迪米特法则只是要求降低类间耦合关系，并不是要求完全没有依赖关系

### 1.2.7 合成复用原则（Composite Reuse Principle）

1. 简介  
    尽量使用合成/聚合的方式，而不是使用继承

### 1.2.8 设计原则核心思想

1. 找出应用中可能需要变化之处，把它们独立出来，不要和那些不需要变化的代码混在一起。
2. 针对接口编程，而不是针对实现编程。
3. 为了交互对象之间的松耦合设计而努力


